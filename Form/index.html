<!DOCTYPE html>
<html lang="en">
<head>
	<title>Secret code Ana Bajric</title>
	 <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Secret code">
  <link rel="stylesheet" href="form.css">
 
</head>
<body>

<h1>Secret code</h1>

<div class="form_div">
<form name="myform" action="" method="GET">
	<input class="input_secret" type="text" id="text_field" name="secret_code" pattern = “[A-Za-z]”>
	<input class="input_button" type="button" name="button" value="OK" onClick="testResults(this.form)">
</form>
</div>

<p class="the_message" id="output">Your secret message: </p>

<div class="text">
  <p> 
<b>Instructions: </b>The user can enter a message with no spaces between the words. Maximum message length is 81 characters. A warning will be displayed if there is some wrong input.<br>
<br>
    <b>Explanation: </b>This is a classic method for composing secret messages called a square code. The spaces are removed from the english text and the characters are written into a square (or rectangle). <br>
    <br>
<b>Example:</b><br>
anabajric<br>
ana baj ric<br>
<b>End result: abr nai ajc</b><br>
    <br>
The <b>process</b> looks like this: For example, the sentence "If man was meant to stay on the ground god would have given us roots" - is 54 characters long, and so it is written into a rectangle with 7 rows and 8 columns:<br>
ifmanwas meanttos tayonthe groundgo dwouldha vegivenu sroots<br>
<br>
The coded message is obtained by reading down the columns going left to right. For example, the message above is coded as:<br>
<br>
imtgdvs fearwer mayoogo anouuio ntnnlvt wttddes aohghn sseoau<br>

 </p>
</div>

<script language="JavaScript">
let array = [];
let brojac = 0;

let your_message= document.getElementById("output");
//matrica treba da bude istih dimenzija - square matrica
//niz treba da ima duzinu 8 Noup
//izbaciti prazna mesta
//spojiti reci u niz sa length 8


/*function create2Darray(A) {
  var arr = [];
  var rows = Math.sqrt(A.length);
  for (var i = 0; i < rows; i++) {
    arr[i] = [];
    for (var j = 0; j < rows; j++) {
      arr[i][j] = A[i * rows + j];
    }
  }
  return arr;
}*/


//length text field je 81.
// ako nije engleski prijavljuje gresku?
//if ch is that char,you can do this
//if((writenText.charCodeAt(0)>="a".charCodeAt(0) && writenText.charCodeAt(0)<="z".charCodeAt(0))||(writenText.charCodeAt(0)>="A".charCodeAt(0) && writenText.charCodeAt(0)<="Z".charCodeAt(0)))




function testResults (form) {
  let secret_message = [];
	var form = document.getElementsByName("myform");
	var inputbox = document.getElementById("text_field");
    //var writenText = form.inputbox.value;
    var writenText = inputbox.value;
   // alert ("You typed: " + writenText);
  //  if(writenText.contains(' '))
    	//proveraUslova(writenText);
    if (writenText.includes(' ') || writenText.length >= 81 || writenText==''){
alert("Nedozvoljen unos");
return;
}
    	console.log("koren: "+Math.sqrt(writenText.length));

    	var rows = Math.ceil(Math.sqrt(writenText.length));
    	console.log("length reci: "+writenText.length);
    	console.log(writenText);
    	console.log("rows "+rows);
    	console.log("PODEljeno s 2: "+(writenText/2));
    	//while(brojac<=writenText.length){
      for (var i = 0; i < rows; i++) {
    array[i] = [];
    for (var j = 0; j < rows; j++) {
      array[i][j] = writenText[i * rows + j];
      if(array[i][j]==undefined){
      	array[i][j] =' ';
      }
      console.log("redovi: "+ (writenText[i * rows + j]));
      console.log("racunanje: "+ (i * rows + j));
      	//brojac++;
    }
  }
//}
  console.log(array);
  console.log("secret message: ")
  for (var row = 0; row < array.length; row++) {    
    for (var col = 0; col < array[row].length; col++) {
       console.log(array[col][row]);
       console.log("br kol: "+array.indexOf[col]);
       if(array[col][row]==' ') {
       	console.log("prazno mesto");
       }else{
       secret_message.push(array[col][row]);
   }
   if(col==array[col].length-1){

secret_message.push(' ');
console.log("USLOV");
}
   //console.log("LENGTH COL: "+array[col].length);
    }
}

secret_message = secret_message.join('');
  //alert("Your encoded message: "+ secret_message);
  your_message.innerHTML = "Your secret message: "+secret_message.bold();
}
//ako sqrt nije ceo broj onda su ispod brojevi undefined

</script>

</body>
</html>
